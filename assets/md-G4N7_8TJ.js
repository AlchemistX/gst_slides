import{b as a,o as p,w as t,g as l,B as n,v as i,x as d,C as o}from"./modules/vue-DhAglAFb.js";import{_ as m}from"./top-title-DXL6wPsa.js";import{u as c,f as _}from"./slidev/context-DBUmR2Lv.js";import"./layoutHelper-HtdtuDyr.js";import"./index-CAm3x-8s.js";import"./modules/shiki-B1249S1Y.js";const A={__name:"10-03-pad_and_capabilities.md__slidev_222",setup(g){const{$clicksContext:u,$frontmatter:e}=c();return u.setup(),(f,s)=>(p(),a(m,i(d(o(_)(o(e),221))),{title:t(r=>[...s[0]||(s[0]=[l("h1",null,"Caps Negotiation : Pull-mode usecase",-1)])]),content:t(r=>[...s[1]||(s[1]=[l("div",{class:"ns-c-tight text-sm code-dense"},[l("h4",null,"해결 방법 : 다운스트림 엘리먼트가 협상을 주도"),l("p",null,"push-mode에서는 데이터가 흐르면서 자연스럽게 협상이 일어나지만, pull-mode에서는 다릅니다."),l("h4",null,"Pull-mode 협상 메커니즘"),l("p",null,[l("strong",null,"타이밍")]),l("ul",null,[l("li",null,[l("strong",null,"SCHEDULING 쿼리 성공 후"),n(", "),l("strong",null,"pulling 스레드 시작 전"),n("에 협상 수행")]),l("li",null,[l("strong",null,"PAUSED→PLAYING 상태 변경 전"),n("에 협상 완료")]),l("li",null,[l("strong",null,"저지연 유지"),n("를 위해 pulling 스레드 내에서 협상 회피")])]),l("p",null,[l("strong",null,"단계별 과정")]),l("ol",null,[l("li",null,[l("strong",null,"GST_QUERY_SCHEDULING"),n("로 업스트림의 pull-mode 지원 확인")]),l("li",null,[l("strong",null,"sink가 협상 시작"),n(": sink pad와 peer src pad의 "),l("code",null,"gst_pad_query_caps()"),n(" 결과를 교집합")]),l("li",null,[l("strong",null,"caps 고정화"),n(": 결과 caps를 fixate하여 flow caps 생성")]),l("li",null,[l("strong",null,"caps 설정"),n(": sink pad에 고정된 caps 설정 (실패 시 버스에 에러 메시지)")]),l("li",null,[l("strong",null,"pull-mode 활성화"),n(": sink pad와 연결된 업스트림 엘리먼트의 pad들을 pull-mode로 활성화")]),l("li",null,[l("strong",null,"GST_STATE_CHANGE_ASYNC 반환"),n(": 상태 변경 함수에서 ASYNC 반환, 첫 버퍼 수신 시 PAUSED로 커밋")])])],-1)])]),_:1},16))}};export{A as default};
